(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["form"],{1036:function(e,t,a){"use strict";var s=a("f02b"),l=a.n(s);l.a},"4a16":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("div",{staticClass:"teacher-list",on:{click:function(t){return t.target!==t.currentTarget?null:e.closeThis(t)}}},[a("div",{staticClass:"list-content"},[a("div",{staticClass:"search-input"},[a("div",{staticStyle:{"margin-right":"1rem"}},[a("el-input",{attrs:{placeholder:"请输入教师名称"},model:{value:e.teacherName,callback:function(t){e.teacherName=t},expression:"teacherName"}})],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),a("div",{staticStyle:{"margin-top":"1rem"}},[a("el-table",{ref:"table",staticClass:"table",attrs:{data:e.list},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"教师照片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px","object-fit":"contain"},attrs:{src:e.row.photo,alt:"图片未加载"}})]}}],null,!1,3686283370)}),a("el-table-column",{attrs:{prop:"name",label:"教师名称"}}),a("el-table-column",{attrs:{prop:"note",label:"教师简介"}}),a("el-table-column",{attrs:{label:"选择"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.select(t.$index,t.row)}}},[e._v("选择")])]}}],null,!1,2722384122)})],1)],1)])]):e._e()},l=[],i=(a("7f7f"),{name:"teacherlist",props:{show:{type:Boolean,value:!1}},data:function(){return{teacherName:"",pageNum:1,pageSize:10,list:[],totalPage:1}},created:function(){this.getList()},methods:{handleSearch:function(){this.getList()},closeThis:function(){this.$emit("close")},getList:function(){var e=this,t={teacherName:this.teacherName,pageNum:this.pageNum,pageSize:this.pageSize};this.axios.get("/manager/teacherManagement/obtianTeacher",{params:t}).then((function(t){console.log(t),e.list=t.data.contents,e.totalPage=t.data.page.pages}))},handleSelectionChange:function(){},select:function(e,t){this.$emit("select",{id:t.id,name:t.name})}}}),n=i,r=(a("d99a"),a("2877")),o=Object(r["a"])(n,s,l,!1,null,null,null);t["a"]=o.exports},be8d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 课程管理\n            ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box display_flex between"},[a("div",{staticClass:"display_flex"},[a("el-input",{staticClass:"m-r-20",attrs:{placeholder:"请输入课程名称"},model:{value:e.query.courseName,callback:function(t){e.$set(e.query,"courseName",t)},expression:"query.courseName"}}),a("el-input",{staticClass:"m-r-20",attrs:{placeholder:"请输入教师名称"},model:{value:e.query.teacherName,callback:function(t){e.$set(e.query,"teacherName",t)},expression:"query.teacherName"}}),a("el-select",{staticClass:"m-r-20 w-200",attrs:{clearable:"",placeholder:"请选择课程状态"},model:{value:e.selectStatus,callback:function(t){e.selectStatus=t},expression:"selectStatus"}},[a("el-option",{attrs:{label:"下架",value:0}},[e._v("下架")]),a("el-option",{attrs:{label:"发布",value:1}},[e._v("发布")])],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.open}},[e._v("新增")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.classLoading,expression:"classLoading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"courseName",label:"课程名称"}}),a("el-table-column",{attrs:{label:"课程简介",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"less"},[e._v(e._s(t.row.courseNote))])]}}])}),a("el-table-column",{attrs:{label:"课程价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.price))]}}])}),a("el-table-column",{attrs:{label:"适宜观看人群",prop:"suitablePeople",align:"center"}}),a("el-table-column",{attrs:{prop:"teacherName",label:"讲师姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"effectiveTime",label:"有效时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.effectiveTime+"个月"))]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"publish",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s("0"==t.row.publish?"下架":"发布"))])]}}])}),a("el-table-column",{attrs:{label:"编辑状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.publish(t.$index,t.row)}}},[e._v("\n                        "+e._s("0"==t.row.publish?"发布":" 下架")+"\n                    ")])]}}])}),a("el-table-column",{attrs:{label:"章节测试",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.jumpTest(t.$index,t.row)}}},[e._v("编辑")])]}}])}),a("el-table-column",{attrs:{label:"课节",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.jump(t.$index,t.row)}}},[e._v("编辑")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.pageNum,"page-size":10,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"新增课程",visible:e.editVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px",rules:e.rules}},[a("el-form-item",{attrs:{label:"课程名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"课程简介",prop:"note"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5},resize:"none"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1),a("el-form-item",{attrs:{label:"价格",prop:"price"}},[a("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),a("el-form-item",{attrs:{label:"课程观看适宜人群",prop:"suitablePeople"}},[a("el-input",{model:{value:e.form.suitablePeople,callback:function(t){e.$set(e.form,"suitablePeople",t)},expression:"form.suitablePeople"}})],1),a("el-form-item",{attrs:{label:"有效时间(单位:月)",prop:"effectiveTime"}},[a("el-input",{model:{value:e.form.effectiveTime,callback:function(t){e.$set(e.form,"effectiveTime",e._n(t))},expression:"form.effectiveTime"}})],1),a("el-form-item",{attrs:{label:"教师",prop:"teacherId"}},[a("el-input",{on:{focus:e.openTeacher},model:{value:e.form.selectTeacherName,callback:function(t){e.$set(e.form,"selectTeacherName",t)},expression:"form.selectTeacherName"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:!e.isCheck,expression:"!isCheck"}],attrs:{type:"primary"},on:{click:function(t){return e.addClass("form")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"测试管理",visible:e.testVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.testVisible=t}}},[a("el-table",{ref:"tableTest",staticClass:"table",staticStyle:{height:"300px",overflow:"auto"},attrs:{data:e.testList}},[a("el-table-column",{attrs:{prop:"name",label:"课名称",width:"300"}}),a("el-table-column",{attrs:{label:"课程节次",width:"100",prop:"lesson"}}),a("el-table-column",{attrs:{label:"单元测试",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.editSingleClass(t.row)}}},[e._v("编辑")])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editAllClass}},[e._v("编辑章节评测")])],1)],1),a("teacherlist",{attrs:{show:e.showSelectTeacher},on:{close:function(t){e.showSelectTeacher=!1},select:e.selectTeacher}})],1)},l=[],i=(a("7f7f"),a("4a16")),n={components:{teacherlist:i["a"]},data:function(){return{rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],note:[{required:!0,message:"请输入简介",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"},{pattern:/^[1-9]\d*$|^[1-9]\d*\.[0-9]{0,2}$|^(0\.0[1-9]{1})$|^(0\.[1-9]{1}[1-9]{0,1})$/,message:"请输入正确的金额"}],suitablePeople:[{required:!0,message:"请输入名称",trigger:"blur"}],effectiveTime:[{required:!0,message:"请输入有效期",trigger:"blur"},{type:"number",message:"有效期必须为数字值"}],teacherNameRule:[{required:!0,message:"请输入有效期",trigger:"blur"}],teacherId:[{required:!0,message:"请选择教师",trigger:"blur"}]},query:{},form:{id:"",effectiveTime:"",name:"",note:"",price:"",teacherId:"",suitablePeople:"",selectTeacherName:""},tableData:[],testList:[],editVisible:!1,pageTotal:0,pageNum:1,showSelectTeacher:!1,testVisible:!1,testItem:"",classLoading:!1,selectStatus:"",isCheck:!0}},created:function(){this.getData({pageNum:this.pageNum,pageSize:10})},methods:{openTeacher:function(e){this.showSelectTeacher=!0},selectTeacher:function(e){console.log(e);var t=JSON.parse(JSON.stringify(this.form));t.teacherId=e.id,t.selectTeacherName=e.name,this.form=t,this.showSelectTeacher=!1},publish:function(e,t){var a=this;console.log(t),0==t.publish?this.$confirm("确定要发布吗？","提示",{type:"warning"}).then((function(){var e={courseId:t.courseId,publish:1};a.axios.get("/manager/courseManagement/publishCourse",{params:e}).then((function(e){a.$message.success("发布成功"),a.getData({pageNum:a.pageNum,pageSize:10})}))})).catch((function(){})):this.$confirm("确定要下架吗？","提示",{type:"warning"}).then((function(){var e={courseId:t.courseId,publish:0};a.axios.get("/manager/courseManagement/publishCourse",{params:e}).then((function(e){a.$message.success("下架成功"),a.getData({pageNum:a.pageNum,pageSize:10})}))})).catch((function(){}))},getData:function(e){var t=this;this.classLoading=!0,this.axios.get("/manager/courseManagement/obtainCourse",{params:e}).then((function(e){t.classLoading=!1,t.tableData=e.data.contents,t.pageTotal=e.data.page.total,t.pageNum=e.data.page.pageNum}))},handleSearch:function(){var e={courseName:this.query.courseName,teacherName:this.query.teacherName,publish:this.selectStatus,pageNum:1,pageSize:10};for(var t in e)e[t]||0===e[t]||delete e[t];this.getData(e)},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){var e={courseId:t.courseId};a.axios.get("/manager/courseManagement/deleteCourse",{params:e}).then((function(e){a.$message.success("删除成功"),a.getData({pageNum:1,pageSize:10})}))})).catch((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},delAllSelection:function(){var e=this.multipleSelection.length,t="";this.delList=this.delList.concat(this.multipleSelection);for(var a=0;a<e;a++)t+=this.multipleSelection[a].name+" ";this.$message.error("删除了".concat(t)),this.multipleSelection=[]},handleEdit:function(e,t){this.editVisible=!0;var a=this.tableData[e];console.log(a);var s={name:a.courseName,note:a.courseNote,price:a.price,suitablePeople:a.suitablePeople,effectiveTime:a.effectiveTime,selectTeacherName:a.teacherName,teacherId:a.teacherId,id:a.courseId};this.form=s},open:function(e){this.form={id:0,effectiveTime:"",name:"",note:"",price:"",teacherId:"",suitablePeople:""},this.editVisible=!0},addClass:function(e){var t=this;this.isCheck&&this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.isCheck=!1,t.axios.post("/manager/courseManagement/insertCourse",t.form).then((function(e){t.$message.success(t.form.id?"更新成功":"添加成功"),t.editVisible=!1,t.getData({pageNum:1,pageSize:10}),setTimeout((function(){t.isCheck=!0}),500)}))}))},saveEdit:function(){this.editVisible=!1,this.$message.success("修改第 ".concat(this.idx+1," 行成功")),this.$set(this.tableData,this.idx,this.form)},handlePageChange:function(e){console.log(e),this.getData({pageNum:e,pageSize:10})},jump:function(e,t){console.log(e),this.$router.push({path:"/course",query:{id:t.courseId}})},editSingleClass:function(e){var t=e;console.log(t),this.$router.push({path:"/courseTest",query:{id:t.courseId,testId:t.id}})},editAllClass:function(){var e=this.testItem;this.$router.push({path:"/classTest",query:{id:e.courseId}})},jumpTest:function(e,t){var a=this,s=t.courseId;this.testItem=t,this.testVisible=!0,this.axios.get("/manager/courseManagement/obtainCourseCatalog",{params:{courseId:s}}).then((function(e){a.testList=e.data}))}}},r=n,o=(a("1036"),a("2877")),c=Object(o["a"])(r,s,l,!1,null,"29c1b640",null);t["default"]=c.exports},c086:function(e,t,a){},d99a:function(e,t,a){"use strict";var s=a("c086"),l=a.n(s);l.a},f02b:function(e,t,a){}}]);