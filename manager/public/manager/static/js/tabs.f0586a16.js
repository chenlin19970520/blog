(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tabs"],{1167:function(e,a,t){},"30ee":function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"administrator"},[t("Crumbes",{attrs:{title:"管理员管理"}}),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container"},[t("div",{staticClass:"handle-box display_flex between"},[t("div",{staticClass:"display_flex"},[t("el-input",{staticClass:"m-r-20",attrs:{clearable:"",placeholder:"请输入管理员名称"},model:{value:e.searchForm.userName,callback:function(a){e.$set(e.searchForm,"userName",a)},expression:"searchForm.userName"}}),t("el-input",{staticClass:"m-r-20",attrs:{clearable:"",placeholder:"请输入角色名称"},model:{value:e.searchForm.roleName,callback:function(a){e.$set(e.searchForm,"roleName",a)},expression:"searchForm.roleName"}}),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(a){return e.getData()}}},[e._v("搜索")])],1),t("div",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.openAdminDialog("add")}}},[e._v("新增")])],1)]),t("el-table",{attrs:{border:"",data:e.adminData}},[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"name",width:"140",label:"管理员名"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"roleName",width:"140",label:"角色名"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"username",width:"140",label:"登陆账号"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"password",width:"140",label:"登陆密码"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"note",label:"简介"}}),t("el-table-column",{attrs:{width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openAdminDialog("edit",a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteAdmin(a.row)}}},[e._v("删除")])]}}])})],1),t("Pagination",{attrs:{data:e.paginationData},on:{currentChange:e.currentChange}})],1),t("el-dialog",{attrs:{title:e.dialogType?"新增管理员":"编辑管理员信息",visible:e.messageDialog,width:"30%"},on:{"update:visible":function(a){e.messageDialog=a}}},[t("el-form",{ref:"dialogInfo",attrs:{model:e.dialogInfo,"label-width":"100px",rules:e.rules}},[t("el-form-item",{attrs:{label:"管理员名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入管理员名称"},model:{value:e.dialogInfo.name,callback:function(a){e.$set(e.dialogInfo,"name",a)},expression:"dialogInfo.name"}})],1),t("el-form-item",{attrs:{label:"登录账号",prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入登录账号(6-10位字母或数字)"},model:{value:e.dialogInfo.username,callback:function(a){e.$set(e.dialogInfo,"username",a)},expression:"dialogInfo.username"}})],1),t("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入登录密码(6-10位字母或数字)"},model:{value:e.dialogInfo.password,callback:function(a){e.$set(e.dialogInfo,"password",a)},expression:"dialogInfo.password"}})],1),t("el-form-item",{attrs:{label:"选择角色",prop:"roleId"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择或搜索角色"},model:{value:e.dialogInfo.roleId,callback:function(a){e.$set(e.dialogInfo,"roleId",a)},expression:"dialogInfo.roleId"}},e._l(e.roleList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"管理员简介",prop:"note"}},[t("el-input",{attrs:{type:"textarea",rows:"4",resize:"none",placeholder:"请输入简介"},model:{value:e.dialogInfo.note,callback:function(a){e.$set(e.dialogInfo,"note",a)},expression:"dialogInfo.note"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.messageDialog=!1}}},[e._v("取 消")]),t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.btnLoading,expression:"btnLoading"}],attrs:{type:"primary"},on:{click:function(a){return e.submitBtn("dialogInfo")}}},[e._v("保 存")])],1)],1)],1)},n=[],i={name:"index",components:{Crumbes:function(){return t.e("chunk-2d0b1a42").then(t.bind(null,"215b"))},Pagination:function(){return t.e("chunk-679a02ad").then(t.bind(null,"d529"))}},data:function(){return{rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{pattern:/^[0-9A-Za-z]{6,10}$/,message:"请输入正确的用户名"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^[0-9A-Za-z]{6,10}$/,message:"请输入正确的密码"}],roleId:[{required:!0,message:"请选择角色",trigger:"blur"}],note:[{required:!0,message:"请输入简介",trigger:"blur"}]},loading:!1,adminData:[],paginationData:{},pageNumber:"",searchForm:{},dialogType:!1,messageDialog:!1,dialogInfo:{name:"",username:"",password:"",roleId:"",note:"",userId:0},roleList:[],btnLoading:!1}},methods:{getData:function(){var e=this;this.loading=!0;var a={userName:this.searchForm.userName||null,roleName:this.searchForm.roleName||null,pageNum:this.pageNumber||null};this.axios.get("/manager/auditManagement/obtainAdministrator",{params:a}).then((function(a){200===a.status?(e.loading=!1,e.adminData=a.data.contents,e.paginationData=a.data.page):e.$message.warning(a.data)})).catch((function(){e.$message.error("数据获取失败，请稍后重试")}))},currentChange:function(e){this.pageNumber=e,this.getData()},openAdminDialog:function(e,a){console.log(a),this.dialogType="add"===e,this.messageDialog=!0,this.dialogInfo=a?JSON.parse(JSON.stringify(a)):{name:"",note:"",password:"",roleId:"",userId:0,username:""},this.getRoleList()},submitBtn:function(e){var a=this;this.btnLoading||(console.log(e,this.$refs[e]),this.$refs[e].validate((function(e){console.log(e),e&&(a.dialogInfo.userId=a.dialogInfo.id,a.dialogInfo.userId||(a.dialogInfo.userId=0),a.btnLoading=!0,a.axios.post("/manager/auditManagement/insertAdministrator",a.dialogInfo).then((function(e){200===e.status?(a.getData(),a.$message.success(a.dialogInfo.userId?"更新成功":"添加成功"),a.messageDialog=!1,setTimeout((function(){a.btnLoading=!1}),500)):(a.$message.warning(e.data),setTimeout((function(){a.btnLoading=!1}),500))})))})))},getRoleList:function(){var e=this,a={pageSize:999};this.axios.get("/manager/auditManagement/obtainRole",{params:a}).then((function(a){200===a.status?e.roleList=a.data.contents:e.$message.warning(a.data)}))},deleteAdmin:function(e){var a=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={userId:e.id};a.axios.get("/manager/auditManagement/deleteAdministrator",{params:t}).then((function(e){200===e.status?(a.getData(),a.$message.success(e.data)):a.$message.warning(e.data)}))})).catch((function(){}))}},created:function(){this.getData()}},r=i,s=(t("ffca"),t("2877")),l=Object(s["a"])(r,o,n,!1,null,"68736e7c",null);a["default"]=l.exports},ffca:function(e,a,t){"use strict";var o=t("1167"),n=t.n(o);n.a}}]);