(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chart"],{"5c7f":function(e,t,a){},9620:function(e,t,a){"use strict";var r=a("5c7f"),s=a.n(r);s.a},e7fb:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teacher"},[a("Crumbes",{attrs:{title:"教师管理"}}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container"},[a("div",{staticClass:"handle-box display_flex between"},[a("div",{staticClass:"display_flex"},[a("el-input",{staticClass:"m-r-20",attrs:{clearable:"",placeholder:"请输入教师名称"},model:{value:e.searchForm.teacherName,callback:function(t){e.$set(e.searchForm,"teacherName",t)},expression:"searchForm.teacherName"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getData()}}},[e._v("搜索")])],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.openAddDialog("add","form")}}},[e._v("新增")])],1)]),a("el-table",{attrs:{border:"",data:e.teacherList}},[a("el-table-column",{attrs:{prop:"name",width:"140",label:"教师名称"}}),a("el-table-column",{attrs:{align:"center",width:"220",label:"教师照片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{fit:"cover","preview-src-list":[e.row.photo],src:e.row.photo}})]}}])}),a("el-table-column",{attrs:{width:"140",prop:"username",label:"登陆用户名"}}),a("el-table-column",{attrs:{width:"140",prop:"password",label:"登陆密码"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"note",label:"教师简介"}}),a("el-table-column",{attrs:{width:"150",label:"教师简介"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.openAddDialog("edit","form",t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteTeacher(t.row)}}},[e._v("删除")])]}}])})],1),a("Pagination",{attrs:{data:e.paginationData},on:{currentChange:e.currentChange}})],1),a("el-dialog",{attrs:{title:e.dialogType?"新增教师":"编辑教师信息",visible:e.addTeacherDialog,width:"30%"},on:{"update:visible":function(t){e.addTeacherDialog=t}}},[a("el-form",{ref:"form",attrs:{model:e.teacherMessage,rules:e.rules}},[a("el-form-item",{attrs:{label:"教师名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入教师名称"},model:{value:e.teacherMessage.name,callback:function(t){e.$set(e.teacherMessage,"name",t)},expression:"teacherMessage.name"}})],1),a("el-form-item",{attrs:{label:"教师照片",prop:"photo"}},[a("QiniuImg",{attrs:{address:e.teacherMessage.photo,close:!0},on:{back:e.getImgUrl}})],1),a("el-form-item",{attrs:{label:"登录用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入登录用户名(6-10位字母或数字)"},model:{value:e.teacherMessage.username,callback:function(t){e.$set(e.teacherMessage,"username",t)},expression:"teacherMessage.username"}})],1),a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入登录密码(6-10位字母或数字)"},model:{value:e.teacherMessage.password,callback:function(t){e.$set(e.teacherMessage,"password",t)},expression:"teacherMessage.password"}})],1),a("el-form-item",{attrs:{label:"简介",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:"4",resize:"none",placeholder:"请输入简介"},model:{value:e.teacherMessage.note,callback:function(t){e.$set(e.teacherMessage,"note",t)},expression:"teacherMessage.note"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addTeacherDialog=!1}}},[e._v("取 消")]),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:!e.isCheck,expression:"!isCheck"}],attrs:{type:"primary"},on:{click:function(t){return e.submitBtn("form")}}},[e._v("保 存")])],1)],1)],1)},s=[],n={name:"index",components:{Crumbes:function(){return a.e("chunk-2d0b1a42").then(a.bind(null,"215b"))},Pagination:function(){return a.e("chunk-679a02ad").then(a.bind(null,"d529"))},QiniuImg:function(){return a.e("chunk-5ebeb5bf").then(a.bind(null,"f454"))}},data:function(){return{rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{pattern:/^[0-9A-Za-z]{6,10}$/,message:"请输入正确的用户名"}],note:[{required:!0,message:"请输入简介",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^[0-9A-Za-z]{6,10}$/,message:"请输入正确的用户名"}],photo:[{required:!0,message:"请上传图片",trigger:"blur"}]},loading:!1,teacherList:[],searchForm:{teacherName:""},addTeacherDialog:!1,dialogType:!1,teacherMessage:{name:"",username:"",password:"",note:"",photo:""},editMessage:{},paginationData:{},pageNumber:"",isCheck:!0}},methods:{getImgUrl:function(e){var t=JSON.parse(JSON.stringify(this.teacherMessage));t.photo=e,this.teacherMessage=t},getData:function(){var e=this;this.loading=!0;var t={teacherName:this.searchForm.teacherName||null,pageNum:this.pageNumber||null};this.axios.get("/manager/teacherManagement/obtianTeacher",{params:t}).then((function(t){200===t.status?(e.loading=!1,e.teacherList=t.data.contents,e.paginationData=t.data.page):e.$message.warning(t.data)})).catch((function(){e.$message.error("数据获取失败，请稍后重试")}))},currentChange:function(e){this.pageNumber=e,this.getData()},openAddDialog:function(e,t,a){this.dialogType="add"===e,this.addTeacherDialog=!0,this.teacherMessage=a?JSON.parse(JSON.stringify(a)):{name:"",photo:"",username:"",password:"",note:""},t&&this.$refs[t]&&this.$refs[t].resetFields()},submitBtn:function(e){var t=this;this.isCheck&&this.$refs[e].validate((function(e){e&&(t.isCheck=!1,t.teacherMessage["teacherId"]=t.dialogType?0:t.teacherMessage.id,t.axios.post("/manager/teacherManagement/insertTeacher",t.teacherMessage).then((function(e){200===e.status?(t.$message.success(e.data),t.addTeacherDialog=!1,t.getData(),setTimeout((function(){t.isCheck=!0}),500)):(t.$message.warning(e.data),setTimeout((function(){t.isCheck=!0}),500))})))}))},deleteTeacher:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={teacherId:e.id};t.axios.get("/manager/teacherManagement/deleteTeacher",{params:a}).then((function(e){200===e.status?(t.getData(),t.$message.success(e.data)):t.$message.warning(e.data)}))})).catch((function(){}))}},created:function(){this.getData()}},i=n,o=(a("9620"),a("2877")),l=Object(o["a"])(i,r,s,!1,null,"761aad3b",null);t["default"]=l.exports}}]);